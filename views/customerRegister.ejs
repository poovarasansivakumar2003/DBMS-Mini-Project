<%- include('includes/header') %>

<div class="min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full space-y-8 bg-white rounded-2xl shadow-xl p-8 border border-gray-100">

    <!-- Logo/Icon -->
    <div class="text-center">
      <div class="mx-auto h-16 w-16 bg-indigo-100 rounded-full flex items-center justify-center">
        <i class="fas fa-clinic-medical text-blue-600 text-2xl"></i>
      </div>
      <h2 class="mt-6 text-3xl font-extrabold text-gray-900">Create Account</h2>
      <p class="mt-2 text-sm text-gray-600">Register for a new account</p>
    </div>

    <!-- Error Message -->
    <% if (typeof error !=="undefined" && error) { %>
    <div class="mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md">
      <div class="flex items-center">
        <i class="fas fa-exclamation-circle text-red-500 mr-3"></i>
        <p class="text-sm text-red-700">
          <%= error %>
        </p>
      </div>
    </div>
    <% } %>

    <form action="/customerRegister" method="POST" enctype="multipart/form-data" class="mt-8 space-y-6">
      <!-- Full Name Field -->
      <div>
        <label for="customer_name" class="block text-sm font-medium text-gray-700 mb-1">
          Your Name <span class="text-red-500">*</span>
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-user text-gray-400"></i>
          </div>
          <input type="text" id="customer_name" name="customer_name" required class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg 
                               text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 
                               focus:ring-indigo-500 focus:border-transparent transition-all duration-200" placeholder="Enter your full name">
        </div>
      </div>

      <!-- Email Field -->
      <div>
        <label for="customer_email" class="block text-sm font-medium text-gray-700 mb-1">
          Email Address <span class="text-red-500">*</span>
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-envelope text-gray-400"></i>
          </div>
          <input type="email" id="customer_email" name="customer_email" required class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg 
                               text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 
                               focus:ring-indigo-500 focus:border-transparent transition-all duration-200" placeholder="Enter your email address">
        </div>
      </div>

      <!-- Phone Number Field -->
      <div>
        <label for="customer_ph_no" class="block text-sm font-medium text-gray-700 mb-1">
          Phone Number <span class="text-red-500">*</span>
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-phone text-gray-400"></i>
          </div>
          <input type="tel" id="customer_ph_no" name="customer_ph_no" required class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg 
                               text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 
                               focus:ring-indigo-500 focus:border-transparent transition-all duration-200" placeholder="Enter your phone number">
        </div>
      </div>

      <!-- Photo Upload Field -->
      <div>
        <label for="customer_photo" class="block text-sm font-medium text-gray-700 mb-1">Upload
          Photo <span class="text-red-500">Only images (JPEG, JPG, PNG) are allowed!</span></label>
        <div class="relative">
          <input type="file" id="customer_photo" name="customer_photo" accept="image/*" class="block w-full py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200" onchange="previewImage(event)">
        </div>
        <!-- Image Preview -->
        <div class="mt-3 flex items-center gap-4">
          <img id="image-preview" class="w-24 h-24 rounded-full border border-gray-300 object-cover hidden shadow-md" alt="Profile Preview">
          <button type="button" id="remove-image" class="hidden text-sm text-red-500 hover:text-red-700 font-medium" onclick="removeImage()">Remove</button>
        </div>
      </div>

      <!-- Address Field -->
      <div>
        <label for="customer_address" class="block text-sm font-medium text-gray-700 mb-1">
          Address
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fa-solid fa-address-book text-gray-400"></i>
          </div>
          <input type="tel" id="customer_address" name="customer_address" class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg 
                               text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 
                               focus:ring-indigo-500 focus:border-transparent transition-all duration-200" placeholder="Enter your address">
        </div>
      </div>

      <!-- Password Field -->
      <div>
        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">
          Password <span class="text-red-500">*</span>
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fas fa-lock text-gray-400"></i>
          </div>
          <input type="password" id="customer_password" name="customer_password" required class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg 
                               placeholder-gray-500 focus:outline-none focus:ring-2 
                               focus:ring-blue-500 focus:border-transparent transition-all duration-200" placeholder="Enter your password">
          <button type="button" onclick="togglePassword()" class="absolute inset-y-0 right-0 pr-3 flex items-center">
            <i id="password-toggle" class="fas fa-eye text-gray-400 hover:text-gray-600 cursor-pointer"></i>
          </button>
        </div>
      </div>

      <!-- Submit Button -->
      <div>
        <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent 
                           text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 
                           focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 
                           transition-all duration-200">
          <div class="flex items-center">

            <i class="fas fa-sign-in-alt mr-2"></i>
            <span id="submitText">Create Account</span>
          </div>
          <span id="loadingSpinner" class="hidden ml-2">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
              </path>
            </svg>
          </span>
        </button>
      </div>
    </form>

    <!-- Login Link -->
    <div class="text-center mt-6">
      <p class="text-sm text-gray-600">
        Already have an account?
        <a href="/login" class="font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200">
          Sign In
        </a>
      </p>
    </div>
  </div>
</div>
<script>
  // togglePassword for customer registration 
  function togglePassword() {
    const passwordInput = document.getElementById('customer_password');
    const passwordToggle = document.getElementById('password-toggle');

    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      passwordToggle.classList.remove('fa-eye');
      passwordToggle.classList.add('fa-eye-slash');
    } else {
      passwordInput.type = 'password';
      passwordToggle.classList.remove('fa-eye-slash');
      passwordToggle.classList.add('fa-eye');
    }
  }


  function previewImage(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const imgElement = document.getElementById("image-preview");
        const removeButton = document.getElementById("remove-image");
        imgElement.src = e.target.result;
        imgElement.classList.remove("hidden");
        removeButton.classList.remove("hidden");
      };
      reader.readAsDataURL(file);
    }
  }

  function removeImage() {
    const imgElement = document.getElementById("image-preview");
    const removeButton = document.getElementById("remove-image");
    const fileInput = document.getElementById("customer_photo");
    imgElement.src = "";
    imgElement.classList.add("hidden");
    removeButton.classList.add("hidden");
    fileInput.value = "";
  }

  document.querySelector('form').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submitBtn');
    const submitText = document.getElementById('submitText');
    const loadingSpinner = document.getElementById('loadingSpinner');

    // Show loading state
    submitBtn.disabled = true;
    submitText.textContent = 'Creating Profile...';
    loadingSpinner.classList.remove('hidden');
  });
</script>
<%- include('includes/footer') %>